{"version":3,"sources":["webpack:///src/views/mobile/dashboard-pages/src/views/mobile/dashboard-pages/companies.vue"],"names":[],"mappings":"AA8UA,OACA,qCACA,CACA,YAEA,QACA","file":"chunk-406232ec.b7858cfd.css","sourcesContent":["<template>\n  <section class=\"dashboard-admin-page h-min-screen mt-12\">\n    <button\n      :class=\" loading ? 'icon-loading' : '' \"\n      class=\"z-10 fas fa-sync-alt text-gray-700 fixed right-0 top-0 z-20 px-4 py-3 leading-none mt-px focus:outline-none\"\n      @click.prevent.stop=\"fetchCompanyDetail\"\n    />\n    <button\n      class=\"goTop transition-slow block fixed h-10 opacity-0 outline-none rounded-full w-10 focus:outline-none\n                   border border-solid border-gray-700 bg-white right-0 bottom-0 mr-3 mb-3\"\n      :class=\"showBtn ? 'opacity-100 ':'opacity-0'\"\n      @click=\"topFunction()\"\n    >\n      <i aria-hidden=\"true\" class=\"fa fa-angle-up text-gray-700 text-2xl\" />\n    </button>\n\n    <section class=\"bg-white px-5 pt-6 pb-8 border-b border-gray-200\">\n      <div\n        class=\"appearance-none bg-gray-100 block border border-gray-400 focus:bg-white focus:border-gray-500\n      focus:outline-none leading-tight mb-3 p-2 py-2 rounded text-gray-600 w-full\"\n      >\n        <button class=\"focus:outline-none outline-none text-gray-600\">\n          <i class=\"fas fa-search\" />\n        </button>\n        <input\n          id=\"article-search-input\"\n          v-model=\"searchInput\"\n          :autofocus=\"false\"\n          :autofocus-time=\"500\"\n          placeholder=\"Search Company by Name\"\n          class=\"bg-gray-100 pl-3 text-gray-700 w-5/6\"\n        >\n      </div>\n\n      <div class=\"flex text-gray-600 justify-center text-sm\">\n        <div class=\"flex-1 relative mr-1\">\n          <select\n            v-model=\"typeFilter\"\n            class=\"block\n            appearance-none\n            w-full\n            bg-gray-100\n            border\n            border-gray-400\n            hover:border-gray-500\n            px-4\n            py-2\n            pr-8\n            rounded\n            leading-tight\n            focus:outline-none\"\n          >\n            <option value=\"\">\n              Filter by Account Type\n            </option>\n            <option v-for=\"type in companyTypes\" :key=\"type\" :value=\"type\">\n              {{ type }}\n            </option>\n          </select>\n          <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n            <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\n          </div>\n        </div>\n        <div class=\"flex-1 relative ml-1\">\n          <select\n            v-model=\"verticalFilter\"\n            class=\"block\n            appearance-none\n            w-full\n            bg-gray-100\n            border\n            border-gray-400\n            hover:border-gray-500\n            px-4\n            py-2\n            pr-8\n            rounded\n            leading-tight\n            focus:outline-none\"\n          >\n            <option value=\"\">\n              Filter by Vertical\n            </option>\n            <option v-for=\"vertical in verticals\" :key=\"vertical\" :value=\"vertical\">\n              {{ vertical }}\n            </option>\n          </select>\n          <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n            <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" /></svg>\n          </div>\n        </div>\n      </div>\n\n      <div\n        v-if=\"searchInput || typeFilter || statusFilter || verticalFilter \"\n        class=\"mx-5 mt-3 text-gray-600\"\n      >\n        <p class=\"mb-1\">\n          Filtering by:\n        </p>\n        <span v-if=\"searchInput\" class=\"text-gray-600\">\n          <label class=\"border border-gray-400 mb-2 bg-gray-300 inline-block px-2 mr-2 pointer rounded w-full break-words\">\n            Filter query: {{ searchInput }}\n          </label>\n        </span>\n        <span v-if=\"typeFilter\" class=\"text-gray-600\">\n          <label class=\"border border-gray-400 mb-2 bg-gray-300 inline-block px-2 mr-2 pointer rounded w-full break-words\">\n            Account Type: {{ typeFilter }}\n          </label>\n        </span>\n        <span v-if=\"verticalFilter\" class=\"text-gray-600\">\n          <label class=\"border border-gray-400 mb-2 bg-gray-300 inline-block px-2 mr-2 pointer rounded w-full break-words\">\n            Vertical: {{ verticalFilter }}\n          </label>\n        </span>\n        <span v-if=\"statusFilter\" class=\"text-gray-600\">\n          <label class=\"border border-gray-400 mb-2 bg-gray-300 inline-block px-2 mr-2 pointer rounded w-full break-words\">\n            Status: {{ statusFilter?'In-active':'Active' }}\n          </label>\n        </span>\n        <!-- <label class=\"block flex items-center\"><input v-model=\"filterAccountsInRed\" class=\"mr-2\" type=\"checkbox\">Show all accounts in red</label>\n          <label class=\"block flex items-center\"><input class=\"mr-2\" type=\"checkbox\">Show red accounts in VOD only</label>\n          <label class=\"block flex items-center\"><input class=\"mr-2\" type=\"checkbox\">Show red accounts in VOD only</label> -->\n      </div>\n      <button\n        v-if=\" searchInput || statusFilter || typeFilter || verticalFilter\"\n        class=\"bg-red-500 text-white px-2 rounded ml-5\"\n        @click.prevent.stop=\"resetFilters\"\n      >\n        Reset all filters\n      </button>\n    </section>\n\n    <p class=\"mx-5 my-3 text-sm text-gray-700 flex justify-between items-center\">\n      Showing Companies: {{ filterResult ? filterResult.length : 0 }}\n\n      <router-link to=\"/dashboard/admin/company/addNewCompany\" class=\"border-2 border-gray-500 rounded px-2 text-gray-600\">\n        Add Company\n      </router-link>\n      <!-- Added Edit Button -->\n      <!-- <router-link :to=`/dashboard/admin/company/edit/${user.id}` class=\"border-2 border-gray-500 rounded px-2 text-gray-600\">\n        Edit user\n      </router-link> -->\n    </p>\n    <section class=\"bg-white px-4\">\n      <div\n        class=\"\n        bg-white block border-b border-t flex justify-between leading-normal px-1 py-2 sticky font-extrabold text-black text-xl uppercase\"\n      >\n        <p class=\"w-2/3\">\n          Company\n        </p>\n        <p class=\"w-1/3 text-center\">\n          Vertical\n        </p>\n        <p class=\"w-1/3 text-right\">\n          Active\n        </p>\n      </div>\n      <div v-if=\"loader\">\n        <CompanyLoader />\n      </div>\n      <div v-else>\n        <router-link\n          v-for=\"company in filterResult\"\n          :key=\"company.id\"\n          :to=\"`/dashboard/admin/company/edit/${company.companyId}/${company.id}`\"\n          class=\"\n          border-b\n          border-gray-200\n          py-3\n          w-full\n          px-1\n          block\n          flex\n          text-left\n          justify-between\n          items-center\n          pointer\n        \"\n        >\n          <div class=\"text-left w-2/3 font-bold text-xl\">\n            <p class=\"capitalize \">\n              {{ company.company | lowercase }}\n            </p>\n            <ul class=\"flex\">\n              <li class=\"flex border border-b-4 border-blue-600 font-bold px-2 shadow-lg rounded text-black text-blue-600 text-xs\">\n                {{ company.type }}\n              </li>\n            </ul>\n          </div>\n          <div class=\"text-center w-1/3\">\n            <p class=\"\">\n              {{ company.vertical }}\n            </p>\n          </div>\n          <div class=\"text-right w-1/3\">\n            <div class=\"no-text-wrap flex items-center justify-end flex-1 px-1\">\n              <i v-if=\"!company.isHidden\" class=\"far fa-check-circle text-green-500 text-lg pr-2\" />\n              <i v-else class=\"far fa-times-circle text-red-500 text-lg pr-2\" />\n            </div>\n          </div>\n        </router-link>\n      </div>\n    </section>\n  </section>\n</template>\n\n<script>\nimport gql from 'graphql-tag';\nimport CompanyLoader from './loader/companyLoader.vue';\n\nexport default {\n  name: 'Company',\n  components: { CompanyLoader },\n  // apollo: {\n  //   allCompanies: {\n  //     query: gql`query {\n  //       allCompanies: getAllCompanyVerticals {\n  //             id\n  //             companyId\n  //             type\n  //             verticalId\n  //             company\n  //             vertical\n  //             isHidden\n  //         }\n  //     }`,\n  //   },\n  // },\n  data() {\n    return {\n      query: '',\n      searchInput: '',\n      typeFilter: '',\n      verticalFilter: '',\n      statusFilter: '',\n      loading: false,\n      allCompanies: [],\n      allCompaniesFilter: [],\n      showBtn: false,\n      loader: true,\n    };\n  },\n  computed: {\n    verticals() {\n      return [...new Set((this.allCompanies || []).map(({ vertical }) => vertical))];\n    },\n    companyTypes() {\n      return [...new Set((this.allCompanies || []).map(({ type }) => type))];\n    },\n\n    filterResult() {\n      let companies = this.allCompanies ? [...this.allCompanies] : [];\n      //   console.log(companies);\n      if (this.searchInput) {\n        // console.log(this.query);\n        companies = companies.filter(({ company }) => company.toLowerCase().includes(this.searchInput.toLowerCase()));\n      }\n\n      if (this.typeFilter) {\n        companies = companies.filter(({ type }) => type === this.typeFilter);\n      }\n\n      if (this.verticalFilter) {\n        companies = companies.filter(({ vertical }) => vertical === this.verticalFilter);\n      }\n      return companies;\n    },\n\n  },\n  watch: {\n    $route(currentVal) {\n      if (currentVal.name === 'Dashboard.Companies') {\n        this.fetchCompanyDetail();\n        // this.$apollo.queries.allCompanies.refetch();\n      }\n    },\n  },\n  mounted() {\n    this.fetchCompanyDetail();\n  },\n  beforeMount() {\n    window.addEventListener('scroll', this.scrollFunction);\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('scroll', this.scrollFunction);\n  },\n  methods: {\n    searchQueryUpdated(val) {\n      this.query = val;\n    },\n    scrollFunction() {\n      this.showBtn = window.scrollY > 200;\n    },\n\n    topFunction() {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    },\n\n    resetFilters() {\n      this.searchInput = '';\n      this.typeFilter = '';\n      this.verticalFilter = '';\n      this.statusFilter = '';\n    },\n\n    async fetchCompanyDetail() {\n      this.loading = true;\n      // this.$apollo.queries.allUsers.refetch();\n      const { data } = await this.$apollo.query({\n        fetchPolicy: 'network-only',\n        query: gql`query {\n            allCompanies: getAllCompanyVerticals {\n              id\n              companyId\n              type\n              verticalId\n              company\n              vertical\n              isHidden\n          }\n        }`,\n      });\n      this.allCompanies = data.allCompanies;\n      this.loader = false;\n      this.loading = false;\n    },\n  },\n};\n</script>\n<style>\n\n.goTop {\n    box-shadow: 0px 0px 10px 0px #00000069;\n}\n.table-head\n{\n  top:48px;\n}\n</style>\n"]}