(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28a9da6b"],{"53b4":function(e,t,n){},"6b7a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dashboard-tasks-page bg-white h-min-screen mt-12 p-5 px-6 pt-2",on:{scroll:e.handleScroll}},[n("section",{staticClass:"salutation-cont my-6"},[n("h1",{staticClass:"font-bold letter-spacing-05 text-3xl"},[e._v(" Hello, "+e._s(e.user?e.user.name:"")+" ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.companies&&e.companies.length,expression:"companies && companies.length"}],staticClass:"mt-2"},[e._v(" Here are the companies for which you need to provide "+e._s(e.user.isVOC?"Voice Of Sales (VOS)":"Voice of Delivery (VOD)")+" inputs ")]),n("p",{directives:[{name:"show",rawName:"v-show",value:e.companies&&!e.companies.length,expression:"companies && !companies.length"}],staticClass:"mt-2"},[e._v(" You are not aligned with any account to provide its "+e._s(e.user.isVOC?"Voice Of Sales (VOS)":"Voice of Delivery (VOD)")+" inputs. ")])]),n("section",{directives:[{name:"show",rawName:"v-show",value:e.companies&&e.companies.length,expression:"companies && companies.length"}],staticClass:"pending-cont flex justify-between items-center border-t pt-6"},[n("h1",{staticClass:"font-bold letter-spacing-05 text-xl pt-1"},[e._v(" "+e._s(e.user.isVOC?"VOS":"VOD")+" inputs for Today "),n("p",{staticClass:"text-gray-600 font-normal text-sm"},[e._v(" "+e._s(e._f("dateFormat")(new Date))+" ")])]),n("radial-progress-bar",{staticClass:"relative",attrs:{diameter:52,"completed-steps":e.completedSteps,"total-steps":100,"stroke-width":3,"animate-speed":1200,"inner-stroke-color":"#ededed","start-color":"#007AFF","stop-color":"#00ADCF",timing:"cubic-bezier(.2, .3, .25, .9)"}},[n("p",{staticClass:"text-blue-500 text-sm font-bold absolute pin-abs-center"},[n("ICountUp",{attrs:{"end-val":e.completedSteps,options:{useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""}}}),e._v("% ")],1)])],1),n("section",{directives:[{name:"show",rawName:"v-show",value:e.companies&&e.companies.length,expression:"companies && companies.length"}],staticClass:"content-cont my-6 pb-1"},e._l(e.companies,(function(t){return n("div",{key:t.companyVerticalId,staticClass:"\n        task-item\n        w-full\n        focus:outline-none\n        py-3\n        px-2\n        no-underline\n        block\n        flex\n        items-center\n        leading-normal\n        justify-between\n        relative\n        my-2\n        rounded\n        px-4\n        pointer\n      ",class:[t.feedback?"border border-green-400 bg-green-100":"shadow"],on:{click:function(n){return n.preventDefault(),e.openFeedbackModal(t)}}},[n("div",{staticClass:"text-left leading-snug"},[n("h1",[e._v(e._s(t.name))]),n("h2",{staticClass:"text-sm text-gray-600 text-left"},[e._v(" "+e._s(t.type)+" ")])]),n("div",[t.feedback?n("i",{staticClass:"fa-check text-green-400 fas relative text-lg"}):n("i",{staticClass:"fa-ellipsis-h fas relative text-gray-500",staticStyle:{top:"-1px"}})])])})),0),n("modal",{ref:"feedback-modal-comp",attrs:{"modal-content-cont-height":"h-full","show-close-btn":!0,name:"comments-modal"},on:{modalOpenEvent:function(t){e.formSubmitted=!1}}},["fetchArticleComments"===e.request.key&&e.request.inProgress?n("div",{staticClass:"text-center m-10"},[n("img",{staticClass:"mb-5 block mx-auto",attrs:{src:"/img/loader.gif",width:"30",alt:"Loader Gif"}}),n("p",{staticClass:"mx-auto leading-normal text-lg w-1/2"},[e._v(" Fetching comments for article... ")])]):e._e(),n("section",{staticClass:"modal-body flex flex-col align-center justify-center py-4 px-8",class:{"h-full":e.formSubmitted}},[e.formSubmitted?n("div",{staticClass:"success-cont"},[n("success",{staticClass:"h-24 w-full"}),n("h1",{staticClass:"text-2xl my-2 text-center"},[e._v(" Successfully submitted the review for "),n("span",{staticClass:"font-bold"},[e._v(e._s(e.selectedCompanyObj.name))])]),n("router-link",{staticClass:"block w-full py-1 mt-6 text-center text-lg mb-16 flex items-center justify-center",attrs:{to:"/dashboard/company/"+e.selectedCompanyObj.companyVerticalId}},[e._v(" Click here to view historical "+e._s(e.user.isVOC?"VOS":"VOD")+" data "),n("span",{staticClass:"fas fa-arrow-right ml-1 text-base"})])],1):n("div",{staticClass:"form-body"},[n("h4",{staticClass:"mt-1 text-gray-600 text-sm"},[e._v(" "+e._s(e.selectedCompanyObj.type)+" ")]),n("h1",{staticClass:"font-bold letter-spacing-05 text-2xl"},[e._v(" "+e._s(e.selectedCompanyObj.name)+" ")]),n("p",{staticClass:"mt-2"},[e._v(" Please rate Genpactâ€™s Operations health for "+e._s(e.selectedCompanyObj.name)+" based on your judgement today ")]),n("p",{staticClass:"my-3 border-b pb-5 mb-4"},e._l(5,(function(t){return n("button",{key:t,staticClass:"fa-star mr-3 text-2xl text-genpact-pink focus:outline-none",class:[t<=e.rating?"fas":"far"],attrs:{"data-rating":t},on:{click:e.updateRating}})})),0),n("p",{staticClass:"mt-5"},[e._v(" Please select the action items based on which above rating was given: ")]),n("div",{staticClass:"my-3 border-b pb-4 mb-3"},e._l(e.keywords,(function(t){return n("span",{key:t.id,staticClass:"font-semibold leading-loose letter-spacing-05 text-sm text-gray-600 label-pill"},[n("input",{staticClass:"absolute invisible",attrs:{id:"input-"+t.name+"-"+t.id,type:"checkbox"},on:{change:function(n){return e.updateIssueKeywords(t.id)}}}),n("label",{staticClass:"border inline-block border-gray-400 mb-2 mr-2 px-4 py-1 rounded-lg pointer",attrs:{for:"input-"+t.name+"-"+t.id}},[e._v(" "+e._s(t.name)+" ")])])})),0),n("p",{staticClass:"mt-5"},[e._v(" Please provide an action plan to be followed going forward: ")]),"fetchArticleComments"!==e.request.key||!e.request.inProgress||"commentOnArticle"===e.request.key&&e.request.inProgress?n("div",{staticClass:"comments-cta-cont my-3 mt-1 pb-5 mb-4"},[n("div",{staticClass:"text-sm text-red-600 leading-tight mt-1 mb-2"},[e._v(" "+e._s(e.errors.first("actionPlan"))+" ")]),n("textarea",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,max:200,regex:/^[\w\-.,\s]+$/},expression:"{required: true, max:200, regex:/^[\\w\\-.,\\s]+$/ }"}],staticClass:"\n              appearance-none\n              bg-gray-100\n              block\n              border-2\n              focus:bg-white\n              focus:border-gray-400\n              focus:outline-none\n              leading-normal\n              mb-3\n              px-4\n              py-3\n              rounded\n              text-gray-800 w-full\n              transition-smooth\n              transition-instant\n              overflow-hidden\n            ",class:{"opacity-75 shadow-none":"commentOnArticle"===e.request.key&&e.request.inProgress,"border-red-500 focus:border-red-500":e.errors.first("actionPlan")},attrs:{id:"actionPlan",name:"actionPlan",required:"","data-vv-as":"action plan",disabled:"commentOnArticle"===e.request.key&&e.request.inProgress},on:{keydown:e.resizeTextArea}}),e._v(" "),n("button",{staticClass:"bg-green-500\n              button\n              border-2\n              border-green-500\n              block\n              w-full\n              font-semibold\n              leading-normal\n              px-4\n              py-1\n              mt-6\n              rounded\n              text-lg\n              letter-spacing-05\n              leading-loose\n              text-white\n            ",class:{"loading opacity-50":e.feedbackSavingInProgress},attrs:{disabled:e.feedbackSavingInProgress||!e.rating||!e.keywordsArr.length||!e.actionPlan||e.errors.first("actionPlan")},on:{click:function(t){return t.preventDefault(),e.submitFeedback(t)}}},[e._v(" Submit "),n("ring-loader")],1)]):e._e()])])])],1)},s=[],r=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("d3b7"),n("ac1f"),n("2532"),n("1276"),n("159b"),n("96cf"),n("1da1")),o=n("5530"),i=n("8785"),c=n("2f62"),l=n("9530"),d=n.n(l),u=n("5a0c"),m=n.n(u);function p(){var e=Object(i["a"])(["\n            mutation ($actionPlan: String!, $rating: Int!, $companyVerticalId: Int!, $keywords: String!) {\n              addFeedback(\n                actionPlan: $actionPlan\n                rating: $rating\n                keywordIds: $keywords\n                companyVertical: $companyVerticalId\n                # created: $created\n              ) {\n                userId\n                actionPlan\n              }\n            }\n          "]);return p=function(){return e},e}function f(){var e=Object(i["a"])(["query {\n      keywords: keyword {\n        id\n        name\n      }\n    }"]);return f=function(){return e},e}function b(){var e=Object(i["a"])(["query Company($created: String) {\n        userCompanyList {\n          name: company\n          vertical\n          companyVerticalId\n          type\n        }\n        feedbacks: feedback(created: $created) {\n          companyVertical\n        }\n      }"]);return b=function(){return e},e}var h={name:"Banners",components:{Modal:function(){return n.e("chunk-52bc745e").then(n.bind(null,"aff5"))},Success:function(){return n.e("chunk-0b74190a").then(n.bind(null,"39a2"))},RadialProgressBar:function(){return n.e("chunk-74f50ae0").then(n.t.bind(null,"531a",7))},ICountUp:function(){return n.e("chunk-0cd78b85").then(n.t.bind(null,"87f4",7))}},apollo:{companies:{query:d()(b()),fetchPolicy:"network-only",variables:function(){return{created:"%".concat(m()(new Date).format("YYYY-MM-DD"),"%")}},update:function(e){var t=e.feedbacks,n=e.userCompanyList;t.forEach((function(e){var t=e.companyVertical,a=n.find((function(e){var n=e.companyVerticalId;return t===n}));a&&(a.feedback=!0)}));var a=t.length/n.length*100;return this.completedSteps=a>100?100:a,n}},keywords:d()(f())},data:function(){return{completedSteps:0,limitPosition:20,scrolled:!1,lastPosition:0,formSubmitted:!1,rating:0,keywordsArr:[],actionPlan:"",selectedCompanyObj:{},feedbackSavingInProgress:!1}},computed:Object(o["a"])({},Object(c["c"])(["request","user"])),watch:{$route:function(){var e=this.companies.filter((function(e){return!!e.feedback})),t=e.length/this.companies.length*100;this.completedSteps=t>100?100:t}},created:function(){window.addEventListener("scroll",this.handleScroll)},mounted:function(){this.loading=!1;var e=this.$root.$el;e.className+=" tasks-loaded",setTimeout((function(){e.classList.remove("tasks-loaded")}),1600)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},beforeRouteLeave:function(e,t,n){this.$refs["feedback-modal-comp"]&&(this.$refs["feedback-modal-comp"].$data.isOpen=!1),n()},methods:Object(o["a"])({},Object(c["b"])(["addToastNotifications"]),{resizeTextArea:function(e){var t=e.target;this.actionPlan=t.value,setTimeout((function(){t.style.cssText="height:auto; padding:0",t.style.cssText="height: ".concat(t.scrollHeight,"px")}),0)},handleScroll:function(){this.lastPosition<window.scrollY&&this.limitPosition<window.scrollY&&(this.scrolled=!0),window.scrollY<=this.limitPosition&&(this.scrolled=!1),this.lastPosition=window.scrollY,this.$emit("showHeaderShadowEvent",this.scrolled)},openFeedbackModal:function(e){e.feedback?this.$router.push("/dashboard/company/".concat(e.companyVerticalId)):(this.rating=0,this.keywordsArr=[],this.actionPlan="",this.selectedCompanyObj={},this.$refs["feedback-modal-comp"].$data.isOpen=!0,this.selectedCompanyObj=Object(o["a"])({},e))},updateRating:function(e){var t=e.target,n=t.dataset.rating;this.rating=n?parseInt(n,10):0},updateIssueKeywords:function(e){this.keywordsArr.includes(e)?this.keywordsArr=this.keywordsArr.filter((function(t){return t!==e})):this.keywordsArr.push(e)},submitFeedback:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(n=t.sent,n){t.next=6;break}return e.addToastNotifications({text:"Please fill all fields in the form",timer:4e3,type:"error"}),t.abrupt("return");case 6:return t.prev=6,e.feedbackSavingInProgress=!0,t.next=10,e.$apollo.mutate({mutation:d()(p()),variables:{actionPlan:e.actionPlan,rating:e.rating,keywords:JSON.stringify(e.keywordsArr).split("[")[1].split("]")[0],companyVerticalId:e.selectedCompanyObj.companyVerticalId}});case 10:e.formSubmitted=!0,a=e.companies.find((function(t){return t.companyVerticalId===e.selectedCompanyObj.companyVerticalId})),a.feedback={actionPlan:e.actionPlan,rating:e.rating,keywords:e.keywordsArr},s=e.companies.filter((function(e){return!!e.feedback})),r=s.length/e.companies.length*100,e.completedSteps=r>100?100:r,t.next=23;break;case 18:t.prev=18,t.t0=t["catch"](6),console.warn(t.t0.message),i=Object(o["a"])({},t.t0),!i.networkError||401!==i.networkError.statusCode&&403!==i.networkError.statusCode?e.$store.dispatch("addToastNotifications",{text:t.t0.message||"Some error occured in saving the feedback. Please try again.",timer:4e3,type:"error"}):(e.$store.dispatch("addToastNotifications",{text:"Oops! You got logged out. Login again.",timer:4e3,type:"error"}),e.$store.dispatch("logout",e.$store.state.route.fullPath));case 23:return t.prev=23,e.feedbackSavingInProgress=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[6,18,23,26]])})))()}})},g=h,y=(n("e857"),n("2877")),v=Object(y["a"])(g,a,s,!1,null,"b61e4efe",null);t["default"]=v.exports},8785:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("fb6a"),n("dca8");function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},e857:function(e,t,n){"use strict";var a=n("53b4"),s=n.n(a);s.a}}]);
//# sourceMappingURL=chunk-28a9da6b.00b95d0b.js.map