(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dfba5c6"],{8785:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("fb6a"),a("dca8");function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},ab39:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"bg-white h-min-screen"},[a("img",{staticClass:"mt-12 w-full",attrs:{src:"/img/backgrounds/pulse_dashboard.png",alt:"Pulse Dashboard"}}),a("h1",{staticClass:"bg-brand-color border-t-0 border border-dark-gray-700 font-bold py-1 rounded-b-lg text-center text-dark-gray-900 text-lg tracking-wide w-full"},[e._v(" Download Report ")]),a("section",{staticClass:"m-4 sm:mx-0"},[a("div",{staticClass:"border border-blue-800 p-2 flex flex-col bg-dark-gray-200 rounded-lg shadow"},[a("div",{staticClass:"relative"},[a("p",{staticClass:"text-center font-semibold text-blue-900"},[e._v(" Company Vertical ")]),a("div",{staticClass:"mx-auto my-2 mb-5 relative w-2/3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.vertical,expression:"vertical"}],ref:"user-role-select",staticClass:"block appearance-none w-full text-blue-700 bg-gray-100 border\n          border-blue-800 hover:border-blue-900 px-4 py-1 rounded leading-tight focus:outline-none text-sm font-bold",attrs:{id:"user-role-select"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.vertical=t.target.multiple?a:a[0]},e.onSelectVertical]}},[a("option",{domProps:{value:0}},[e._v(" --- ")]),e._l(e.verticalData,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2),a("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-600"},[a("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])]),e.companyListEnable?a("div",{staticClass:"relative"},[a("p",{staticClass:"text-center font-semibold text-blue-900"},[e._v(" Company ")]),a("div",{staticClass:"mx-auto my-2 mb-5 relative w-2/3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.company,expression:"company"}],ref:"user-role-select",staticClass:"block appearance-none w-full text-blue-700 bg-gray-100 border\n          border-blue-800 hover:border-blue-900 px-4 py-1 rounded leading-tight\n          focus:outline-none text-sm font-bold ",attrs:{id:"user-role-select"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.company=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:0}},[e._v(" --- ")]),e._l(e.filterCompanies,(function(t){return a("option",{key:t.companyId,domProps:{value:t.companyId}},[e._v(" "+e._s(t.company)+" ")])}))],2),a("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-600"},[a("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])]):e._e(),a("p",{staticClass:"text-center font-semibold text-blue-900"},[e._v(" From Date ")]),a("div",{staticClass:"mx-auto my-2 mb-5 relative w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],staticClass:"block appearance-none w-full text-blue-700 bg-gray-100 border\n          border-blue-800 hover:border-blue-900 px-4 py-1 rounded leading-tight focus:outline-none text-sm font-bold",attrs:{type:"date"},domProps:{value:e.fromDate},on:{input:function(t){t.target.composing||(e.fromDate=t.target.value)}}})]),a("p",{staticClass:"text-center font-semibold text-blue-900"},[e._v(" To Date ")]),a("div",{staticClass:"mx-auto my-2 mb-5 relative w-2/3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toDate,expression:"toDate"}],staticClass:"block appearance-none w-full text-blue-700 bg-gray-100 border border-blue-800\n           hover:border-blue-900 px-4 py-1 rounded leading-tight focus:outline-none text-sm font-bold",attrs:{type:"date"},domProps:{value:e.toDate},on:{input:function(t){t.target.composing||(e.toDate=t.target.value)}}})]),a("button",{staticClass:"bg-brand-darkest-blue-color py-2 font-bold tracking-widest rounded text-white w-full",on:{click:e.downloadReport}},[e._v(" Download Report "),a("ring-loader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]})],1)])]),[a("transition",{attrs:{name:"bounce"}},[e.showPopUp?a("div",{staticClass:"modal fixed w-full h-full top-0 left-0 flex items-center justify-center z-20"},[a("div",{staticClass:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50"}),a("div",{staticClass:"bg-white flex flex-col h-64 modal-container mx-4 overflow-y-auto relative rounded shadow-lg lg:w-1/3 z-10"},[a("h3",{staticClass:"font-bold mx-auto my-6 px-2 py-6 text-black text-xl"},[e._v(" Report has been sent to your mail Id. ")]),a("div",{staticClass:"flex justify-around"},[a("button",{staticClass:"border-2 border-gray-500 font-bold px-3 rounded text-gray-500 text-lg",on:{click:function(t){return e.leave()}}},[e._v(" OK ")])])])]):e._e()])]],2)},o=[],r=(a("4de4"),a("8785")),i=(a("96cf"),a("1da1")),l=a("bc3a"),s=a.n(l),c=a("5a0c"),d=a.n(c),u=a("9530"),m=a.n(u),p=a("e57c"),f=a.n(p);function v(){var e=Object(r["a"])(["query {\n            allCompanies: getAllCompanyVerticals {\n              id\n              companyId\n              type\n              verticalId\n              company\n              vertical\n              isHidden\n          }\n        }"]);return v=function(){return e},e}var b={name:"DownloadReport",components:{},props:{user:{type:Object,default:function(){}}},data:function(){return{fromDate:d()(new Date).format("YYYY-MM-DD"),toDate:d()(new Date).format("YYYY-MM-DD"),time1:" 00:00:00",time2:" 23:59:59",vertical:0,verticalData:[],company:0,allCompanies:[],filterCompanies:[],showPopUp:!1,loading:!1,companyListEnable:!1,userData:""}},computed:{},mounted:function(){this.fetchAllVertical(),this.fetchAllCompanies()},methods:{onSelectVertical:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.vertical>0?(e.filterCompanies=e.allCompanies.filter((function(t){return t.verticalId===e.vertical})),e.companyListEnable=!0):(e.filterCompanies=[],e.companyListEnable=!1,e.company=0);case 1:case"end":return t.stop()}}),t)})))()},leave:function(){this.showPopUp=!1},fetchAllVertical:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$apollo.query({query:f.a,variables:{}});case 3:a=t.sent,n=a.data,e.verticalData=n.fetchAllVerticals,console.log("TCL: onAccountSelect -> this.verticalData",e.verticalData),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("vertical error -> ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},fetchAllCompanies:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({fetchPolicy:"network-only",query:m()(v())});case 2:a=t.sent,n=a.data,e.allCompanies=n.allCompanies;case 5:case"end":return t.stop()}}),t)})))()},downloadReport:function(){var e=this;""===this.fromDate?this.$store.dispatch("addToastNotifications",{text:"Select from Date !",timer:4e3,type:"error"}):""===this.toDate?this.$store.dispatch("addToastNotifications",{text:"Select to Date !",timer:4e3,type:"error"}):this.toDate<this.fromDate?this.$store.dispatch("addToastNotifications",{text:"Select From date greater than To date !",timer:4e3,type:"error"}):(this.loading=!0,s()({method:"POST",url:"https://prod-29.southindia.logic.azure.com:443/workflows/22138438481341d5aa17411b44e9a362/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=_lZToBrpv0zu8fefEh4dLP-GjrvSCyPZDWmbewLHYHE",headers:{"Content-Type":"application/json",common:{Authorization:""}},data:{fromDate:this.fromDate+this.time1,toDate:this.toDate+this.time2,emailId:"".concat(this.user.ohrid,"@genpact.com"),vertical:this.vertical,company:this.company}}).then((function(t){e.loading=!1,console.log("response ========>",t),e.$store.dispatch("addToastNotifications",{text:"Please check your mail for report.",timer:4e3,type:"success"})})).catch((function(t){e.loading=!1,e.$store.dispatch("addToastNotifications",{text:t.message,timer:4e3,type:"error"})})))}}},h=b,g=a("2877"),y=Object(g["a"])(h,n,o,!1,null,null,null);t["default"]=y.exports},e57c:function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchAllVerticals"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:51}};a.loc.source={body:"query {\n  fetchAllVerticals {\n    id\n    name\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var o={};(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),o[e.name.value]=t}}))})(),e.exports=a}}]);
//# sourceMappingURL=chunk-6dfba5c6.2b8de2bc.js.map